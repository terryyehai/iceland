<!doctype html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>冰島自駕環島 2026｜16天15夜｜Ring Road</title>
  <meta name="description" content="2026年冰島16天15夜環島自駕行程，一號公路 Ring Road，含黃金圈、冰河湖、米湖、斯奈山半島等精彩行程。" />
  <meta name="theme-color" content="#2563eb" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="icon" href="./puffin-icon-192.png" type="image/png" />
  <link rel="apple-touch-icon" href="./puffin-icon-192.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- ===== 英雄橫幅 ===== -->
  <div class="hero">
    <div class="hero-gradient"></div>
    <div class="hero-content">
      <div class="hero-logo">🇮🇸 ICELAND 2026</div>
      <div class="hero-title">冰島自駕環島</div>
      <div class="hero-date">2026年8月1日 – 8月16日</div>
      <div class="hero-badges">
        <span class="badge">🚗 自駕環島</span>
        <span class="badge">🌋 Ring Road</span>
        <span class="badge amber">16天15夜</span>
      </div>
      <div class="countdown-timer" id="countdown">
        <span class="label">距離出發</span>
        <span class="value" id="countdown-value">---</span>
      </div>
    </div>
  </div>

  <!-- ===== 統計列 ===== -->
  <div class="stats-bar">
    <div class="stat-item">
      <div class="stat-icon"><i data-lucide="calendar-days"></i></div><span class="stat-value">16 天</span><span
        class="stat-label">行程天數</span>
    </div>
    <div class="stat-item">
      <div class="stat-icon"><i data-lucide="car"></i></div><span class="stat-value">~1,322 km</span><span
        class="stat-label">環島里程</span>
    </div>
    <div class="stat-item">
      <div class="stat-icon"><i data-lucide="map-pin"></i></div><span class="stat-value">40+</span><span
        class="stat-label">景點</span>
    </div>
    <div class="stat-item">
      <div class="stat-icon"><i data-lucide="bed"></i></div><span class="stat-value">15 晚</span><span
        class="stat-label">住宿</span>
    </div>
  </div>

  <!-- ===== 天氣即時卡 ===== -->
  <div class="section-header">
    <div class="section-dot"></div>
    <h2><i data-lucide="cloud-sun"></i> 冰島即時天氣</h2>
  </div>
  <div class="weather-cards" id="weather-cards">
    <div class="weather-card">
      <div class="wc-loading">載入中...</div>
    </div>
  </div>

  <!-- ===== 實用旅遊資訊 (匯率/油價) ===== -->
  <div class="section-header">
    <div class="section-dot"></div>
    <h2><i data-lucide="info"></i> 實用資訊</h2>
  </div>
  <div class="info-section">
    <!-- 匯率卡片 -->
    <div class="info-card">
      <div class="ic-header">
        <i data-lucide="banknote"></i>
        <span>即時匯率換算</span>
      </div>
      <div class="exchange-rate">
        <div class="rate-value" id="isk-to-twd-rate">載入中...</div>
        <div class="rate-label">1 ISK = ? TWD</div>
      </div>
      <div class="exchange-calc">
        <input type="number" id="isk-input" placeholder="輸入 ISK" value="1000" oninput="calcExchange()">
        <span>ISK =</span>
        <div class="calc-result"><span id="twd-result">---</span> TWD</div>
      </div>
    </div>

    <!-- 油價卡片 -->
    <div class="info-card">
      <div class="ic-header">
        <i data-lucide="fuel"></i>
        <span>冰島當地油價 (參考)</span>
      </div>
      <div class="gas-prices">
        <div class="gas-item">
          <div class="gas-brand n1">N1</div>
          <div class="gas-price" id="n1-price">約 328 ISK / L</div>
        </div>
        <div class="gas-item">
          <div class="gas-brand orkan">Orkan</div>
          <div class="gas-price" id="orkan-price">約 305 ISK / L</div>
        </div>
      </div>
      <div class="gas-note">* 郊區油價較高，建議於市區或 Costco (會員限定) 加油。</div>
    </div>

    <!-- 極光預測 -->
    <div class="info-card aurora-card">
      <div class="ic-header">
        <i data-lucide="sparkles"></i>
        <span>即時太空天氣 (極光指標)</span>
      </div>
      <div class="aurora-info">
        <div class="kp-value" id="aurora-kp">載入中...</div>
        <div class="kp-label">目前 Kp 指數</div>
      </div>
      <div class="aurora-note">
        極光機率評估：<strong id="aurora-chance" style="color:#10b981">--</strong> <br>
        <span class="small-note">* Kp > 3 且無雲層時，肉眼可見機率高。</span>
      </div>
    </div>

    <!-- 安全與實用連結 -->
    <div class="info-card">
      <div class="ic-header">
        <i data-lucide="shield-alert"></i>
        <span>冰島自駕必備連結</span>
      </div>
      <div class="quick-links">
        <a href="https://safetravel.is/" target="_blank" class="ql-btn safetravel"><i data-lucide="alert-triangle"></i>
          SafeTravel (官方警報)</a>
        <a href="https://umferdin.is/en" target="_blank" class="ql-btn roadis"><i data-lucide="car-front"></i> Road.is
          (封路與即時路況)</a>
        <a href="https://en.vedur.is/" target="_blank" class="ql-btn vedur"><i data-lucide="cloud-lightning"></i> Vedur
          (冰島氣象局)</a>
      </div>
      <div class="emergency-contact">
        <div class="em-icon">🚨</div>
        <div class="em-text">冰島全國緊急求救電話：</div>
        <a href="tel:112" class="em-number">112</a>
      </div>
    </div>

    <!-- 航班與旅遊資訊 -->
    <div class="info-card flight-card">
      <div class="ic-header">
        <i data-lucide="plane"></i>
        <span>航班與票務資訊</span>
      </div>
      <div class="flight-details">
        <div class="flight-item">
          <div class="fi-main">
            <span class="fi-airline">CI923</span>
            <span class="fi-route">TPE 18:10 ➔ HKG 20:05</span>
            <span class="fi-status st-sched" id="f-CI923">📍 載入中</span>
          </div>
          <div class="fi-extra" id="f-CI923-ex"></div>
        </div>
        <div class="flight-item">
          <div class="fi-main">
            <span class="fi-airline">LH797</span>
            <span class="fi-route">HKG 23:25 ➔ FRA 06:55</span>
            <span class="fi-status st-sched" id="f-LH797">📍 載入中</span>
          </div>
          <div class="fi-extra" id="f-LH797-ex"></div>
        </div>
        <div class="flight-item">
          <div class="fi-main">
            <span class="fi-airline">LH844</span>
            <span class="fi-route">FRA 11:10 ➔ KEF 12:55</span>
            <span class="fi-status st-sched" id="f-LH844">📍 載入中</span>
          </div>
          <div class="fi-extra" id="f-LH844-ex"></div>
        </div>
        <div class="flight-item mt-2">
          <div class="fi-main">
            <span class="fi-airline">LH845</span>
            <span class="fi-route">KEF 14:20 ➔ FRA 19:50</span>
            <span class="fi-status st-sched" id="f-LH845">📍 載入中</span>
          </div>
          <div class="fi-extra" id="f-LH845-ex"></div>
        </div>
        <div class="flight-item">
          <div class="fi-main">
            <span class="fi-airline">LH796</span>
            <span class="fi-route">FRA 21:40 ➔ HKG 15:45</span>
            <span class="fi-status st-sched" id="f-LH796">📍 載入中</span>
          </div>
          <div class="fi-extra" id="f-LH796-ex"></div>
        </div>
        <div class="flight-item">
          <div class="fi-main">
            <span class="fi-airline">CI916</span>
            <span class="fi-route">HKG 17:30 ➔ TPE 19:25</span>
            <span class="fi-status st-sched" id="f-CI916">📍 載入中</span>
          </div>
          <div class="fi-extra" id="f-CI916-ex"></div>
        </div>

        <div class="flight-note mt-2">☎️ 華航 02-412-9000 (DQREFR)｜漢莎 02-2868-2313 (DBSFXD)</div>
        <div class="flight-note text-red">⚠️ 注意：法蘭克福與香港轉機緊湊，請儘快移動</div>
        <div class="flight-note">🧳 托運行李：1件｜🛂 冰島簽證：免簽</div>
      </div>
    </div>

    <!-- 必備行李清單 -->
    <div class="info-card packing-card">
      <div class="ic-header">
        <i data-lucide="check-square"></i>
        <span>冰島必備行李清單</span>
      </div>
      <div class="packing-list" id="packing-list">
        <!-- JS 動態生成 -->
      </div>
      <div class="packing-progress">
        <div class="progress-bar">
          <div class="progress-fill" id="packing-progress-fill"></div>
        </div>
        <div class="progress-text" id="packing-progress-text">0/8 已準備</div>
      </div>
    </div>
  </div>


  <!-- ===== 每日行程卡片 ===== -->
  <div class="section-header">
    <div class="section-dot"></div>
    <h2><i data-lucide="route"></i> 每日行程</h2>
  </div>
  <div class="day-cards" id="day-cards"></div>

  <!-- ===== 地圖總覽 ===== -->
  <div class="section-header">
    <div class="section-dot"></div>
    <h2><i data-lucide="map"></i> 環島路線</h2>
  </div>
  <div class="map-section">
    <div id="map-overview"></div>
  </div>

  <!-- ===== 旅遊提示 ===== -->
  <div class="section-header">
    <div class="section-dot"></div>
    <h2><i data-lucide="lightbulb"></i> 旅遊提示</h2>
  </div>
  <div class="tips-card">
    <div class="tip-item"><span class="tip-icon"><i data-lucide="fuel"></i></span><span class="tip-text">冰島加油站間距可達 200
        km 以上，看到加油站務必補油！建議備妥 N1 或 Orkan 信用卡加油。</span></div>
    <div class="tip-item"><span class="tip-icon"><i data-lucide="cloud-rain"></i></span><span class="tip-text">8
        月冰島天氣多變，隨時可能下雨。務必攜帶防水外套 (Gore-Tex) 與多層穿搭。</span></div>
    <div class="tip-item"><span class="tip-icon"><i data-lucide="sun"></i></span><span class="tip-text">8 月日照仍長（約 17-20
        小時），可充分利用白天時間但要注意休息。</span></div>
    <div class="tip-item"><span class="tip-icon"><i data-lucide="wifi-off"></i></span><span
        class="tip-text">許多偏遠地區無手機訊號，建議離線下載離線地圖 (maps.me 或 Google Maps)。</span></div>
    <div class="tip-item"><span class="tip-icon"><i data-lucide="banknote"></i></span><span
        class="tip-text">冰島物價極高，超市自煮可節省大量餐費。推薦 Bónus、Krónan 超市。</span></div>
  </div>

  <!-- ===== 底部導覽列 ===== -->
  <nav class="bottom-nav">
    <a class="nav-item active" href="#" onclick="scrollTo({top:0,behavior:'smooth'});return false">
      <div class="nav-icon"><i data-lucide="home"></i></div><span class="nav-label">首頁</span>
    </a>
    <a class="nav-item" href="#day-cards"
      onclick="document.getElementById('day-cards').scrollIntoView({behavior:'smooth'});return false">
      <div class="nav-icon"><i data-lucide="calendar-days"></i></div><span class="nav-label">行程</span>
    </a>
    <a class="nav-item" href="#map-overview"
      onclick="document.getElementById('map-overview').scrollIntoView({behavior:'smooth'});return false">
      <div class="nav-icon"><i data-lucide="map"></i></div><span class="nav-label">地圖</span>
    </a>
    <a class="nav-item" href="#" onclick="toggleSettings();return false">
      <div class="nav-icon"><i data-lucide="settings"></i></div><span class="nav-label">設定</span>
    </a>
  </nav>

  <!-- ===== 設定面板 ===== -->
  <div class="settings-overlay" id="settings-overlay" onclick="if(event.target===this)toggleSettings()">
    <div class="settings-panel">
      <div class="sp-header">
        <h3>⚙️ 設定</h3><button onclick="toggleSettings()" class="sp-close">✕</button>
      </div>
      <div class="sp-item">
        <span>🌙 深色模式</span>
        <label class="switch"><input type="checkbox" id="dark-toggle" onchange="toggleDark()"><span
            class="slider"></span></label>
      </div>
      <div class="sp-item">
        <span>🆎 駕駛大字體模式</span>
        <label class="switch"><input type="checkbox" id="large-text-toggle" onchange="toggleLargeText()"><span
            class="slider"></span></label>
      </div>
      <div class="sp-item-col">
        <div class="sp-item-row">
          <span>🗣️ 語音導覽語速</span>
          <span id="voice-rate-val">1.0x</span>
        </div>
        <input type="range" id="voice-rate" min="0.5" max="2.0" step="0.1" value="1.0" oninput="saveVoiceSettings()"
          style="width:100%; margin-top:8px;">
      </div>
      <div class="sp-item">
        <span>📅 旅遊行事曆一鍵匯出</span>
        <button class="sp-btn" onclick="exportToICS()"><i data-lucide="download"></i> 匯出 (.ics)</button>
      </div>
      <div class="sp-item">
        <span>🔔 早晨推播提醒 (測試)</span>
        <button class="sp-btn" onclick="testNotification()"><i data-lucide="bell"></i> 啟用/測試</button>
      </div>
      <div class="sp-item sp-item-danger">
        <span>🧳 重置個人資料與快取 (強制取得最新版)</span>
        <button class="sp-btn sp-btn-danger" onclick="resetAppData()"><i data-lucide="trash-2"></i> 重整</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>

</html>